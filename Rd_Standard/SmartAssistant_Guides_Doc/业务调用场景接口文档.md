## Ajax接口通用说明
  如无特殊说明，Ajax的method方式统一为post,Content-Type: application/json

## 1：微信身份认证页面 绑定接口
```javascript
    url: http://{host}/aiassistant/user/wx/binding

    parameter: JSON
        {
            userName:"userName",    //[必填]身份认证页面用户名输入框
            password:"password",    //[必填]身份认证页面密码输入框
            wxCode:"wxCode"         //[必填]身份认证页面
        }
    
    result: JSON
        {
            "code": 200,            //绑定结果状态码。 200成功，500失败
            "message": "绑定成功，请返回让小助手热情为你服务吧。",   //绑定成功与失败描述
            "debugMessage": null,
            "data": null
        }
```

## 2：机器人调用微信身份认证接口
```javascript
    url: http://{host}/aiassistant/user/wx/getwxuser?openid=good       //good为示例，实则是真正的微信openid[必填]
    
    parameter: JSON
        {}
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data": {               //500失败时此值为null，200成功时为如下JSON
                "id": 1,                    //用户唯一标识
                "userName": "程云",         //姓名
                "password": "****",         //密码，经过处理了 
                "createTime": "2019-03-10T04:11:47.000+0000",  //创建时间
                "createUser": null,         //创人ID
                "tenantId": 200,            //租户标识
                "wxOpenid": "good"          //微信OpenId
            }            
        }
```

## 3-1：管理端登入接口
```javascript
    url: http://{host}/aiassistant/user/login/userlogin       
    
    parameter: JSON
        {
            "userName":"userName",    //[必填]登入页面用户名输入框
            "password":"password"     //[必填]登入页面密码输入框
        }
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data": {               //500失败时此值为null，200成功时为如下JSON
                "id": 1,                    //用户唯一标识
                "userName": "程云",         //姓名
                "password": "****",         //密码，经过处理了 
                "createTime": "2019-03-10T04:11:47.000+0000",  //创建时间
                "createUser": null,         //创人ID
                "tenantId": 200,            //租户标识
                "wxOpenid": "good"          //微信OpenId
            }            
        }
```

## 3-2：管理端登出接口
```javascript
    url: http://{host}/aiassistant/user/login/userlogout       
    
    parameter: JSON
        { }
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data": null
        }
```

## 3-3：微信H5授权接口。 在微信H5页面请求的任何一个Ajax接口，都必须在URL的最后带上?wxCode=wxCode
```javascript
    url: http://{host}/*/*/*/*?wxCode=wxCode
    
    parameter: JSON
        { 原本是什么就是什么 }
    
    result: JSON    //正确就正常业务返回； 没有权限 统一以下面的数据返回
        {
            "code": 500,            //500失败
            "message": "此操作必须完成微信认证工作，先完成微信授权认证工作",   //授权认证失败。
            "debugMessage": null,
            "data": null
        }
```

## 3-4：获得本租户的所有用户信息
```javascript
    url: http://{host}/aiassistant/user/list/users
    
    parameter: JSON
        {}
    
    result: JSON    //正确就正常业务返回； 没有权限 统一以下面的数据返回
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data": [   //返回本租户的所有用户信息
                {
                    "id": 1,                 //[不展示]用户ID
                    "userName": "程云",       //[展示]用户名称
                    "password": "******",    //[不展示]用户密码
                    "createTime": "2019-03-10T04:11:47.000+0000",    //[不展示]用户创建时间
                    "createUser": 1,         //[不展示]用户的创建人
                    "tenantId": 200,         //[不展示]租户ID
                    "wxOpenid": "good"       //[不展示]用户微信openid
                },{}
            ]
        }
```

## 4：[管理端]获得我配置过的表单数据(第一组第一级菜单里面的 我定义的菜单)
```javascript
    url: http://{host}/aiassistant/formdesign/get/mycreate
    
    parameter: JSON
        {}
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data":                 //500失败时此值为null，200成功时为如下JSON
                [
                    {               //一条配置数据
                        "id": 1,                          //[页面不展示]一个表单配置的主键ID
                        "chineseName": "CRM客户表",        //表单名称
                        "englishName": "crm_customer",    //表单表名
                        "createUser": 1,                  //[页面不展示]表单创建用户ID
                        "createTime": "2019-03-12T00:37:04.000+0000",   //[页面不展示]表单创建日期
                        "tenantId": 200                   //[页面不展示] 
                    },{}
                ]
        }
```

## 5：[管理端]获得所有表单菜单数据：我创建的和赋权给我的(第二组菜单 表单数据)
```javascript
    url: http://{host}/aiassistant/formdesign/get/myformdesign
    
    parameter: JSON
        {}
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data":                 //500失败时此值为null，200成功时为如下JSON
                [
                    {               //一条配置数据
                        "id": 1,                          //[页面不展示]一个表单配置的主键ID
                        "chineseName": "CRM客户表",        //表单名称
                        "englishName": "crm_customer",    //表单表名
                        "createUser": 1,                  //[页面不展示]表单创建用户ID
                        "createTime": "2019-03-12T00:37:04.000+0000",   //[页面不展示]表单创建日期
                        "tenantId": 200                   //[页面不展示] 
                    },{}
                ]
        }
```


## 6：[管理端]根据设计表单唯一ID，获得表单配置数据
```javascript
    url: http://{host}/aiassistant/formdesign/get/formdesigndetail?formid=1    //id=1就是表单配置的唯一标识[必填]
    
    parameter: JSON
        {}
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data":                 //500失败时此值为null，200成功时为如下JSON
                {
                    "tableConfig": {                                //表单整体配置数据
                                "id": 1,                            //[页面不展示]一个表单配置的主键ID
                                "chineseName": "CRM客户表",          //表单名称
                                "englishName": "crm_customer",      //表单表名
                                "createUser": 1,                    //[页面不展示]表单创建用户ID
                                "createTime": "2019-03-12T00:37:04.000+0000",     //[页面不展示]表单创建日期
                                "tenantId": 200                     //[页面不展示] 
                            },
                    "tableColumnConfigList": [
                                {
                                    "id": 1,                //[页面不展示]字段ID
                                    "tableId": 1,           //[页面不展示]外键表单配置的主键ID
                                    "colSeq": 1,            //[页面不展示]字段序号
                                    "chineseName": "公司法定名称",    //字段中文名
                                    "englishName": "chinese_name",   //字段英文名
                                    "colType": "COLUMN_SIGN_LINE_TEXT",    //字段类型下拉框枚举：COLUMN_SIGN_LINE_TEXT=单行文本框,COLUMN_DROP_BOX=下拉框,COLUMN_RICH_TEXT=富文本,COLUMN_MANY_LINE_TEXT=多行文本框,COLUMN_DATE_TIME=日期,COLUMN_NUMBER=数字,COLUMN_PHONE_NUMBER=手机号,COLUMN_EMAIL=邮箱号,COLUMN_FILE=附件,COLUMN_FOREIGN_KEY=外键引用框(下拉框选择与展示)
                                    "colLength": 64,                 //字段长度
                                    "dropValue": null,               //下拉框值域(拜访方法:电话拜访、上门拜访)
                                    "fkValue": null,                 //引用表值域(如:项目系统表 引用 客户表信息)
                                    "defaultValue": null,            //默认值
                                    "displayColumn": 1,              //是否引用展示字段(被表外键引用，展示字段)：1是展示，0不是
                                    "uniqued": 1,                    //是否唯一：1必须唯一，0不做判断
                                    "empty": 0,                      //能否为空：1能为空，0不能为空
                                    "createUser": 1,                 //[页面不展示]表单创建用户ID
                                    "createTime": "2019-03-12T00:50:15.000+0000",   //[页面不展示]表单创建日期
                                    "tenantId": 200                   //[页面不展示] 
                                }
                            ],
                    "tableQueryConfigList": [
                                {
                                    "id": 1,                    //[页面不展示]字段ID
                                    "tableId": 1,               //[页面不展示]外键表单配置的主键ID
                                    "querySeq": 1,              //[页面不展示]查询属性序号
                                    "tableColumn": 1,           //[页面展示]查询属性ID(引用表单表字段ID),从tableColumnConfig中找chinese_name值展示
                                    "tableColumnConfig": {},    //引用表单表字段ID 对应的详细对象内容
                                    "queryType": "CONDITION_ENUM_LIKE",     //查询条件枚举：CONDITION_ENUM_LIKE=包含关系,CONDITION_ENUM_EQUAL=等于,CONDITION_ENUM_MORE=大于,CONDITION_ENUM_LESS=小于,CONDITION_ENUM_BETWEEN=介于之间
                                    "createUser": 1,            //[页面不展示]表单创建用户ID
                                    "createTime": "2019-03-12T01:03:47.000+0000",   //[页面不展示]表单创建日期
                                    "tenantId": 200             //[页面不展示] 
                                }
                            ],
                    "tableDisplayConfigList": [
                                {
                                    "id": 1,                    //[页面不展示]字段ID
                                    "tableId": 1,               //[页面不展示]外键表单配置的主键ID
                                    "displaySeq": 1,            //[页面不展示]结果字段暂时序号
                                    "tableColumn": 1,           //[页面展示]查询属性ID(引用表单表字段ID),从tableColumnConfig中找chinese_name值展示
                                    "tableColumnConfig": {},    //引用表单表字段ID 对应的详细对象内容
                                    "createUser": 1,            //[页面不展示]表单创建用户ID
                                    "createTime": "2019-03-12T01:05:40.000+0000",   //[页面不展示]表单创建日期
                                    "tenantId": 200             //[页面不展示] 
                                }
                            ],
                    "foreignKeyValues":{    //外键引用值总字段
                        "project_name":[    //外键字段名
                            {
                                "id": 3,    //外键引用值1的 主键ID
                                "displayValue": "云问机器人项目"  //外键引用值1的 展示字段
                            },{}
                        ],
                        "connect_persion":[
                            {
                                "id": 2,    //外键引用值1的 主键ID
                                "displayValue": "王总"   //外键引用值1的 展示字段
                            },{}
                        ]
                    }
                }
        }
```

## 7：[管理端]获得我能查看的表单数据(权限见赋权功能):我创建的 和 赋权给我的:  带分页(配置查询条件暂时不做)  
```javascript
    url: http://{host}/aiassistant/formdata/get/myformpagedata
    
    parameter: JSON
        {
            "pageNum" : 1,      //请求页码
            "pageSize" : 30,    //每页数量
            "dto":{             //业务查询条件
                "tableId" : 1,   //表单主键ID，由菜单点击事件获得
                "queryCondition":{    //业务查询条件，TODO 后台功能暂不支持，太复杂了。
                    "queryColumnName":"chinese_name",              //查询条件ID的，英文名，也就是数据库表字段
                    "queryColumnType":"CONDITION_ENUM_LIKE",       //CONDITION_ENUM_LIKE=包含关系,CONDITION_ENUM_EQUAL=等于,CONDITION_ENUM_MORE=大于,CONDITION_ENUM_LESS=小于,CONDITION_ENUM_BETWEEN=介于之间
                    "queryValue":"当当"                             //查询条件的值
                }
            }
        }
    
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "success",   //调用成功与失败描述
            "debugMessage": null,
            "data":                 //500失败时此值为null，200成功时为如下JSON
            {
                    "total": 3,
                    "list": [{                  //数组返回一个表单的分页数据，数组里面是Object
                                "chinese_name": "上海政谱科技有限公司",          //表单数据的，其中一个属性，key就和表单配置数据的key一样
                                "where_from": "老客续费",                       //表单数据的，其中一个属性，key就和表单配置数据的key一样
                                "tenant_id": 200,                              //表单数据的，其中一个属性，key就和表单配置数据的key一样
                                "create_time": "2019-03-12T22:37:40.000+0000", //表单数据的，其中一个属性，key就和表单配置数据的key一样
                                "compange_name": {      //这种说明此字段在配置的时候是 外键引用表的，需要去外键引用的值
                                                    "displayValue": "广东美的制冷设备有限公司",     //引用外键之后的展示字段值
                                                    "originValue": 1                             //原始存储字段值
                                                },
                            },{}],
                    "pageNum": 1,
                    "pageSize": 30,
                    "pages": 1
            }
        }
```

## 8：[移动PC公用]根据表单设计主键ID，与数据主键ID的List,  获得明细数据。 
```javascript
    url: http://{host}/aiassistant/formdata/get/formdatabyid
    
    parameter: JSON
        {
            "tableId" : 1,              //[必填]表单主键ID，由当面所在表单查询页面维护
            "dataIdList":[              //[必填]数据主键ID数组
                1,2
            ]     
         }
         
    result: JSON
        {
            "code": 200,            //调用结果状态码。 200成功，500失败
            "message": "请求成功",   //调用成功与失败描述
            "debugMessage": null,
            "data": [               //500失败时此值为null，200成功时为如下JSON
                {
                    "birthday": "2019-03-15T02:15:01.000+0000",         //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "tenant_id": 200,                                   //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "address": "南京市江宁区胜利路89号",                  //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "create_time": "2019-03-15T02:15:09.000+0000",      //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "user_name": "王总",                                 //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "qq_wx": "34353434",                                //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "user_sex": "男",                                   //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "phone_number": "15345156145",                      //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "id": 2,                                            //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "position": "经理",                                  //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "create_user": 1,                                    //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "compange_name": {                                  //这种说明此字段在配置的时候是 外键引用表的，需要去外键引用的值
                        "displayValue": "广东美的制冷设备有限公司",         //引用外键之后的展示字段值
                        "originValue": 1                                 //原始存储字段值
                    },
                    "department": "HR部门",       //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "age": 20,                    //表单数据的，其中一个属性，key就和表单配置数据的key一样
                    "hobby": "足球"               //表单数据的，其中一个属性，key就和表单配置数据的key一样
                },{}
            ]
        }
```

## 9：[移动PC公用]录入一个表单数据时，调用当前表字段值是否重复接口。
```javascript
    url: http://{host}/aiassistant/formdata/judge/formdata/duplicate
    
    parameter: JSON
        {
            "tableId" : 1,                //[必填]表单主键ID，由当面所在表单查询页面维护
            "tableName": "crm_customer"   //[必填]表单配置的表名称
            "columnName": "compange_name"       //[必填]判断重复的字段名
            "columnValue": "上海政谱科技有限公司"   //[必填]判断重复的value   
         }
         
    result: JSON
        {
            "code": 500,   //500重复了，200不重复
            "message": "已经存在[上海政谱科技有限公司]数据",   //消息
            "debugMessage": null,
            "data": null
        }
```

## 10-1：[移动PC公用]上传一个附件到服务器接口，返回上传成功的文件信息。
```javascript
    url: http://{host}/aiassistant/file/add/file?wxcode=ldkclk5l5k    //微信提供的code
    method: post   form-data 类型  key=file
    parameter: form-data
        {
            "file" : 文件流                //[必填]待上传的文件流
         }
         
    result: JSON
        {
            "code": 200,   //200新增成功，500失败
            "message": "新增成功",   //消息
            "debugMessage": null,
            "data":             //500失败时此值为null，200成功时为如下JSON
                {
                    "id": 3,            //[不展示]主键ID
                    "fileNameOriginal": "高立个人 个人工作总结及问题.docx",              //[展示]原始文件名
                    "fileNameNew": "高立个人 个人工作总结及问题1553048235380.docx",      //[不展示]服务器存储文件名
                    "relativePath": null,
                    "absolutePath": null,
                    "url": "/aiassistant/file/get/file?fileId=3",                     //[不展示]下载改文件的地址
                    "contentType": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",   //[不展示]文件类型
                    "createUser": 1,
                    "createTime": "2019-03-20T02:17:15.396+0000",
                    "tenantId": 200,
                    "del": null
                }
        }
```


## 10-2：[移动PC公用]录入一个表单数据。
```javascript
    url: http://{host}/aiassistant/formdata/add/formrowdata?wxcode=ldkclk5l5k    //微信提供的code
    
    parameter: JSON
        {
            "tableId" : 1,                //[必填]表单主键ID，由当面所在表单查询页面维护
            "tableName": "crm_customer"   //[必填]表单配置的表名称
            "columnValueList": [          //[必填]属性名 属性值 数组,填入全部属性，扩展属性从表单配置属性中取。属性要全。create_user、create_time、tenant_id统一不传
                    {
                        "columnName":"compange_name",  
                        "columnValue":"南京云问"     
                    },
                    {
                        "columnName":"industry_drop",  
                        "columnValue":"互联网"   
                    },
                    {
                        "columnName":"file_id",   //文件类型的属性字段
                        "columnValue":"1"         //文件类型的值
                    },{...}  //这里还有一些，根据实际情况来，create_user、create_time、tenant_id统一不传
                ]
         }
         
    result: JSON
        {
            "code": 200,   //200新增成功，500失败
            "message": "新增成功",   //消息
            "debugMessage": null,
            "data": null
        }
```

## 10-3：[移动PC公用]下载一个附件。
```javascript
    url: http://{host}/aiassistant/file/get/file?fileId=3&wxcode=ldkclk5l5k    //微信提供的code，文件ID

    parameter: 
        {}
         
    result:  //直接返回文件流
```


## 11-1：[赋权功能--表单配置]将我创建的表单配置，付给其他人能管理数据
```javascript
    url: http://{host}/aiassistant/formdesign/auth/designtable
    
    parameter: 
        [
            {
                "tableId":123,  //表单配置ID
                "userId":23     //赋权给的用户ID
            },{
                "tableId":123,  //表单配置ID
                "userId":45     //赋权给的用户ID
            },{}
        ]

    result: JSON
        {
            "code": 200,            //200新增成功，500失败
            "message": "授权成功",   //消息
            "debugMessage": null,
            "data": null
        }
```
## 11-2：[已赋权数据--表单配置]获得当前表单配置，已经赋权的人员信息
```javascript
    url: http://{host}/aiassistant/formdesign/list/authdesigntable?tableId=1    //tableId=当前表单唯一标识
    
    parameter: 
        {}
         
    result: [
                    {
                        "id": null,
                        "tableId": 5,               //tableId=当前表单唯一标识
                        "userId": 84,               //授权给的用户ID
                        "userName": "杜金鑫",        //授权给的用户名称
                        "createUser": 1,
                        "createTime": "2019-03-21T18:37:47.000+0000",
                        "tenantId": 200
                    },
                    {...}
                ]
```

## 11-3：[赋权功能--数据权限]将我创建的表的数据，付给别人：可看、可改
```javascript
    url: http://{host}/aiassistant/formdata/auth/tabledata

    parameter: 
        [
            {
                "fromTable":5,      //待赋权的表单ID
                "toUser":55,        //赋权给的用户ID
                "dataAuthType":"DATA_AUTH_TYPE_VIEW"    //赋权的类型：DATA_AUTH_TYPE_VIEW=查看权限,DATA_AUTH_TYPE_EDIT=修改权限,DATA_AUTH_TYPE_DEL=删除权限
            },{
                "fromTable":5,  
                "toUser":56,
                "dataAuthType":"DATA_AUTH_TYPE_VIEW"
            },{}
        ]
        
    result: JSON
        {
            "code": 200,            //200新增成功，500失败
            "message": "授权成功",   //消息
            "debugMessage": null,
            "data": null
        }
```
## 11-4：[已赋权数据--表单数据]获得当前表单数据，将我表单数据已经赋权给其他人员的信息
```javascript
    url: http://{host}/aiassistant/formdata/list/authtabledata?tableId=5    //tableId=当前表单唯一标识
    
    parameter: 
        {}
         
    result: [
                    {                       
                        "id": null,
                        "fromUser": 1,      //赋权人的数据
                        "fromTable": 5,     //已赋权的表单ID
                        "toUser": 55,       //赋权给的人ID
                        "toUserName": "许杰",     //赋权给的人名称
                        "dataAuthType": "DATA_AUTH_TYPE_VIEW",   //赋权的类型：DATA_AUTH_TYPE_VIEW=查看权限,DATA_AUTH_TYPE_EDIT=修改权限,DATA_AUTH_TYPE_DEL=删除权限
                        "createUser": 1,
                        "createTime": "2019-03-21T19:47:53.000+0000",
                        "tenantId": 200
                    },
                    {...}
                ]
```

## 业务-1：获得我的客户信息：客户、联系人、项目
## 业务-2：获得某个项目的拜访记录信息


## 12-1：创建一个表单设计器表(表单配置、字段配置)接口
```javascript
    url: http://{host}/aiassistant/formdesign/add/tablecolumns

```

## 12-2：删除一个表单设计器表接口(附带删除所有)
```javascript
    url: http://{host}/aiassistant/formdesign/delete/tablecolumns

```

## 13-1：创建 一个表单设计器表的查询展示字段配置 接口
```javascript
    url: http://{host}/aiassistant/formdesign/add/tabledisplays

```

## 13-2：删除一个表单设计器表的查询展示字段配置 接口
```javascript
    url: http://{host}/aiassistant/formdesign/delete/tabledisplays

```

## 13-3：修改一个表单设计器表的查询展示字段配置 接口
```javascript
    url: http://{host}/aiassistant/formdesign/modify/tabledisplays

```

## 14-1：创建一个表单设计器表的查询条件配置 接口
```javascript
    url: http://{host}/aiassistant/formdesign/add/tablequerys

```

## 14-2：删除一个表单设计器表的查询条件配置 接口
```javascript
    url: http://{host}/aiassistant/formdesign/delete/tablequerys

```

## 14-3：修改一个表单设计器表的查询条件配置 接口
```javascript
    url: http://{host}/aiassistant/formdesign/modify/tablequerys

```


